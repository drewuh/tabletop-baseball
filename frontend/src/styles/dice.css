/* ============================================================
   SCENE — perspective container for each die
   ============================================================ */
.dice-scene {
  perspective: 1000px;
  perspective-origin: 50% 40%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* ============================================================
   D6 — true CSS 3D cube
   Size: 56 × 56 px  |  Half (translateZ): 28 px
   ============================================================ */
.dice-cube {
  width: 56px;
  height: 56px;
  position: relative;
  transform-style: preserve-3d;
}

.dice-face {
  position: absolute;
  inset: 0;
  background: #3f3f46; /* zinc-700 base */
  border: 2px solid rgba(255, 255, 255, 0.1);
  border-radius: 7px;
  display: flex;
  align-items: center;
  justify-content: center;
  backface-visibility: visible; /* show all faces during tumble */
}

/* Light source: upper-left-front */
.dice-face--front  { transform: translateZ(28px);                filter: brightness(1.05); }
.dice-face--top    { transform: rotateX(90deg)   translateZ(28px); filter: brightness(1.3);  }
.dice-face--right  { transform: rotateY(90deg)   translateZ(28px); filter: brightness(0.78); }
.dice-face--left   { transform: rotateY(-90deg)  translateZ(28px); filter: brightness(0.65); }
.dice-face--back   { transform: rotateY(180deg)  translateZ(28px); filter: brightness(0.5);  }
.dice-face--bottom { transform: rotateX(-90deg)  translateZ(28px); filter: brightness(0.45); }

.dice-pip {
  font-family: ui-monospace, SFMono-Regular, monospace;
  font-weight: 700;
  font-size: 1.25rem;
  color: #f4f4f5; /* zinc-100 */
  line-height: 1;
  user-select: none;
  pointer-events: none;
}


/* ============================================================
   ROLL KEYFRAMES
   All three variants end at rotateX(720deg) rotateY(720deg)
   = two full rotations on each axis = front face forward
   Z wobble decays to 0° at 100%
   ============================================================ */

/* Variant A: X-axis dominant, clockwise Z wobble */
@keyframes diceRollA {
  0%   { transform: rotateX(0deg)   rotateY(0deg)   rotateZ(0deg);  }
  15%  { transform: rotateX(110deg) rotateY(60deg)  rotateZ(8deg);  }
  30%  { transform: rotateX(252deg) rotateY(195deg) rotateZ(-6deg); }
  50%  { transform: rotateX(420deg) rotateY(348deg) rotateZ(5deg);  }
  70%  { transform: rotateX(564deg) rotateY(528deg) rotateZ(-3deg); }
  88%  { transform: rotateX(690deg) rotateY(690deg) rotateZ(1deg);  }
  100% { transform: rotateX(720deg) rotateY(720deg) rotateZ(0deg);  }
}

/* Variant B: Y-axis dominant, counter-clockwise Z wobble */
@keyframes diceRollB {
  0%   { transform: rotateX(0deg)   rotateY(0deg)   rotateZ(0deg);  }
  15%  { transform: rotateX(54deg)  rotateY(144deg) rotateZ(-9deg); }
  30%  { transform: rotateX(168deg) rotateY(300deg) rotateZ(7deg);  }
  50%  { transform: rotateX(312deg) rotateY(456deg) rotateZ(-6deg); }
  70%  { transform: rotateX(492deg) rotateY(600deg) rotateZ(4deg);  }
  88%  { transform: rotateX(678deg) rotateY(702deg) rotateZ(-1deg); }
  100% { transform: rotateX(720deg) rotateY(720deg) rotateZ(0deg);  }
}

/* Variant C: Balanced tumble, asymmetric Z wobble */
@keyframes diceRollC {
  0%   { transform: rotateX(0deg)   rotateY(0deg)   rotateZ(0deg); }
  15%  { transform: rotateX(84deg)  rotateY(108deg) rotateZ(11deg); }
  30%  { transform: rotateX(204deg) rotateY(264deg) rotateZ(-8deg); }
  50%  { transform: rotateX(372deg) rotateY(408deg) rotateZ(7deg);  }
  70%  { transform: rotateX(528deg) rotateY(564deg) rotateZ(-4deg); }
  88%  { transform: rotateX(684deg) rotateY(696deg) rotateZ(2deg);  }
  100% { transform: rotateX(720deg) rotateY(720deg) rotateZ(0deg);  }
}

/* Spring bounce at settled position */
@keyframes diceSettle {
  0%   { transform: rotateX(720deg) rotateY(720deg) rotateZ(0deg) scale(1);    }
  40%  { transform: rotateX(720deg) rotateY(720deg) rotateZ(0deg) scale(1.1);  }
  70%  { transform: rotateX(720deg) rotateY(720deg) rotateZ(0deg) scale(0.97); }
  100% { transform: rotateX(720deg) rotateY(720deg) rotateZ(0deg) scale(1);    }
}

/* ============================================================
   ANIMATION CLASSES
   ============================================================ */
.dice-roll-a,
.dice-roll-b,
.dice-roll-c {
  animation-timing-function: cubic-bezier(0.37, 0, 0.63, 1);
  animation-iteration-count: 1;
  animation-fill-mode: forwards;
  animation-duration: var(--roll-duration, 1000ms);
}

.dice-roll-a { animation-name: diceRollA; }
.dice-roll-b { animation-name: diceRollB; }
.dice-roll-c { animation-name: diceRollC; }

.dice-settle {
  animation: diceSettle 0.25s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}
